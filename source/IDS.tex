\chapter{Sistema de Detecção de Intrusões}
\label{chap:IDS}

	Com o avanço dos computadores e tecnologias que o perpetuam, uma gama de benefícios para os usuários destas tecnologias foi evidenciadas. No entanto, paralelo a isso, o mundo cibernético torna-se cada vez mais perigoso, uma vez que este avanço proporciona também o aumento de ataques a redes de computadores. No entanto, previnir-se ainda não é suficiente, pois o número de ataques e sua complexidade tendem a crescer além das ferramentas utilizadas para tais ataques ficaram cada vez mais automatizadas.

	Então, uma grande necessidade surge: como garantir um comportamento livres de vulnerabilidade, falhas e ataques?

	Neste contexto, surge no início dos anos 80 os primeiros conceitos de métodos de detecção de instruções no qual ganha espaço ao longo dos anos seguintes.

	Podemos definir que um IDS (\textit{(Intrusion Detection System}) como um sistema de detecção de intrusão suficientemente inteligente para, além de detectar tais intrusões, bloquear ataques baseando-se em configurações e regras que definem possíveis ataques. Ferramentas IDS colaboram para que ataques à segurança de hosts e redes sejam prevenidos ou tratados de alguma forma, mesmo que apenas pela emissão de um alerta, antes que grandes danos sejam causados pelos mesmos \cite{Comunidade Snort Brasil}.

	\section{Tipos de IDS}
	\label{sec:IDS_Tipos}

	As ferramentas de IDS existentes possuem implementação baseada em características funcionais que permitem a classificação destes mecanismos de detecção de intrusão de acordo com tais funcionalidades. Assim, de acordo com Morais (2011), os tipos de IDS existentes podem ser classificados, dentre outras características, por:
		\begin{itemize}
			\item \textbf{Fonte de Eventos} - podem detectar intrusos com referência aos padrões determinados para pacotes tramitados na rede (\textit{network based}) ou através do monitoramento de diversas variáveis de um \textit{host}, tais como uso de software ou hardware (\textit{host based}).
	
			\item \textbf{Método de detecção} - pode ser realizada com base em conhecimento de assinaturas, padrões de ataques já conhecidos. Ainda pode ser baseada em comportamento, permitindo que ataques desconhecidos sejam detectados, uma vez que comportamentos anormais podem representar que um intruso está prestes a atacar o sistema.	
	\end{list}

	\section{Relação IDS e Firewall}
	\label{sec:IDS_Firewall}

	Um Firewall é um sistema de monitoramento de redes utilizado para filtrar pacotes que são transmitidos . Ele é geralmente instalado entre uma rede interna de uma organização e o restante da rede. O firewall pode conceder ou negar acesso de acordo com os critérios estabelecidos previamente \cite{Morais}, porém ele não é capaz de enviar alertas quando detecta anomalias na rede, também não consegue deter um tráfego caso não passe por ele, para obter esses serviços é necessário o uso de um IDS. O IDS por meio de padrões irá detectar em tempo real uma gama de ataques. Enquanto um Firewall age como uma parede entre entre uma rede interna e externa, o IDS consegue identificar ataques internos a rede.

	\section{Vantagens e Limitações do IDS}
	\label{sec:IDS_VeL}

	As ferramentas de detecção de intrusos apresentam vantagens e limitações a depender do tipo de implementação da mesma. Os detectores de intrusos implementados em uma rede, que é o foco do presente trabalho, são capazes de serem invisíveis aos atacantes e monitorar uma rede de grande porte quando implantado no local adequado da rede e configurado com regras eficientes para que ações corretas sejam realizadas em reação aos ataques previstos \cite{Comunidade Snort Brasil}.
	A implementação de ferramentas IDS em \textit{host} apresenta como vantagem a identificação de ataques que não podem ser detectados a nível de rede, uma vez que pacotes que são trafegados pela rede podem ser criptografados, mascarando um ataque. Exemplos de ataques que podem ocorrer a um \textit{host} e que pode não ser identificado por um IDS implementado na rede são aqueles realizados por \textit{Trojan Horses}, já que tais ameaças apresentam-se como parte de um tráfego de dados qualquer que é trocado entre \textit{hosts} \cite{Comunidade Snort Brasil}.
		
	Qualquer sistema IDS apresenta limitações que pode afetar a infra-estrutura da rede onde estão implantadas. Desta forma, a estrutura da rede e recursos limitados podem se tornar um obstáculo ao uso de todos os poderes da ferramenta de IDS que, caso não seja configurada adequadamente, está fadada a exposição à possíveis ataques do tipo DoS (\textit{Deny of Service}). Estas limitações, dentro de uma rede organizacional onde dados confidenciais estão armazenados e são tramitados pela rede, podem facilitar um ataque capaz de gerar falsos positivos que exigem esforços enormes para serem identificados \cite{Morais}.

	\section{Levantamento das Ferramentas IDS}
	\label{sec:IDS_Ferramentas}
	

		Foi realizado um estudo das ferramentas IDS/IPS presentes no mercado. Entre as ferramentas pesquisadas estão:

			\begin{itemize}
				\item \textbf{Snort} - É uma ferramente de detecção de intrusos na rede, ele é um \textit{sniffer} baseado no pacote libpcap \cite{Martin}. É amplamente utilizado por ser flexível em suas configurações de regras e por seu grande número de possibilidades de tratamento dos alertas gerados. 
				\item \textbf{Suricata} - Outra ferramenta de detecção de intrusos na rede baseada em assinaturas. Tem suporte nativo a operações \textit{multithread}, o que é sua principal vantagem em relação ao Snort \cite{Albin}. 
				\item \textbf{Bro NIDS} - Um NIDS baseado em anomalias na rede. Geralmente utilizado para conduzir investigações forense.
				\item \textbf{Security Onion} - É uma distribuição Linux baseada no Ubuntu que provê o monitoramento e segurança da rede. Ela possui um série de ferramentas configuradas, entre elas está o Snort, Suricata, Snorby.  
			\end{itemize}

		A ferramenta que melhor atende os critérios do projeto é a Security Onion, por já possuir um arsenal de ferramentas configuradas e por ser de fácil instalação.
